general:
  name: httpsql
components:
  - type: template
    template: cassandra
    name: db
    vars: {}
  - type: stateless
    name: api
    containers:
      - dir: ./
        readyCheck:
          httpGet:
            port: 80
            path: /
        envVars:
          DB_PROVIDER: cassandra
          DEBUG: 'true'
    expose:
      - servicePort: 80
        containerPort: 80
        external: true
      - servicePort: 8000
        containerPort: 8000
        external: false
        metricsPath: /metrics
    instances: 3
tests:
  - name: func
    containers:
      - dir: ./tests/func
  - name: perf
    containers:
      - dir: ./tests/perf
    instances: 2
